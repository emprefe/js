<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Advanced Div Maker</title>
  <style>
    :root {
      --primary: #4a6fa5;
      --secondary: #166088;
      --light: #f8f9fa;
      --dark: #212529;
      --success: #28a745;
      --danger: #dc3545;
      --warning: #ffc107;
      --info: #17a2b8;
    }
    
    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f5f7fa;
      color: var(--dark);
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 20px;
    }
    
    .app-title {
      text-align: center;
      color: var(--primary);
      margin-bottom: 30px;
    }
    
    .main-layout {
      display: flex;
      gap: 20px;
      flex-wrap: wrap;
    }
    
    .config-panel {
      flex: 1;
      min-width: 300px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 20px;
    }
    
    .preview-panel {
      flex: 1;
      min-width: 300px;
      background: white;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 20px;
    }
    
    .code-panel {
      flex: 2;
      min-width: 100%;
      background: #2d2d2d;
      color: #f8f8f2;
      border-radius: 8px;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      padding: 20px;
    }
    
    .form-group {
      margin-bottom: 15px;
    }
    
    label {
      display: block;
      margin-bottom: 5px;
      font-weight: 500;
    }
    
    input, select, textarea {
      width: 100%;
      padding: 8px 12px;
      border: 1px solid #ced4da;
      border-radius: 4px;
      font-size: 16px;
    }
    
    textarea {
      min-height: 100px;
    }
    
    button {
      background-color: var(--primary);
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      transition: background-color 0.2s;
    }
    
    button:hover {
      background-color: var(--secondary);
    }
    
    .btn-sm {
      padding: 5px 10px;
      font-size: 14px;
    }
    
    .color-picker {
      display: flex;
      gap: 10px;
      margin-top: 5px;
    }
    
    .color-option {
      width: 25px;
      height: 25px;
      border-radius: 50%;
      cursor: pointer;
      border: 2px solid transparent;
    }
    
    .color-option.active {
      border-color: var(--dark);
    }
    
    #preview-container {
      min-height: 200px;
      border: 1px dashed #ced4da;
      padding: 10px;
      margin-bottom: 15px;
      border-radius: 4px;
    }
    
    .presets-container {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 20px;
    }
    
    .preset-btn {
      padding: 8px 12px;
      background-color: #e9ecef;
      border: none;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.2s;
    }
    
    .preset-btn:hover {
      background-color: #ced4da;
    }
    
    .tab-container {
      margin-bottom: 20px;
    }
    
    .tabs {
      display: flex;
      border-bottom: 1px solid #dee2e6;
    }
    
    .tab {
      padding: 10px 15px;
      cursor: pointer;
      border: 1px solid transparent;
      border-top-left-radius: 4px;
      border-top-right-radius: 4px;
      margin-bottom: -1px;
    }
    
    .tab.active {
      background-color: white;
      border-color: #dee2e6;
      border-bottom-color: transparent;
      font-weight: 500;
    }
    
    .tab-content {
      display: none;
      padding: 15px 0;
    }
    
    .tab-content.active {
      display: block;
    }
    
    .code-content {
      background: #2d2d2d;
      color: #f8f8f2;
      padding: 15px;
      border-radius: 4px;
      overflow-x: auto;
      font-family: 'Courier New', Courier, monospace;
    }
    
    .copy-btn {
      background-color: var(--secondary);
      float: right;
      margin-bottom: 5px;
    }
    
    .copied {
      background-color: var(--success);
    }
    
    .field-row {
      display: flex;
      gap: 10px;
      margin-bottom: 15px;
    }
    
    .field-row .form-group {
      flex: 1;
      margin-bottom: 0;
    }
    
    .actions {
      display: flex;
      gap: 10px;
      justify-content: space-between;
      margin-top: 20px;
    }
    
    .advanced-options {
      margin-top: 20px;
      padding-top: 15px;
      border-top: 1px solid #dee2e6;
    }
    
    #custom-css {
      font-family: 'Courier New', Courier, monospace;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1 class="app-title">Advanced Div Maker</h1>
    
    <div class="main-layout">
      <div class="config-panel">
        <div class="tab-container">
          <div class="tabs">
            <div class="tab active" data-tab="basic">Basic</div>
            <div class="tab" data-tab="styling">Styling</div>
            <div class="tab" data-tab="advanced">Advanced</div>
            <div class="tab" data-tab="presets">Presets</div>
          </div>
          
          <div class="tab-content active" data-tab-content="basic">
            <div class="form-group">
              <label for="div-content">Content</label>
              <textarea id="div-content" placeholder="Enter content for your div"></textarea>
            </div>
            
            <div class="field-row">
              <div class="form-group">
                <label for="div-id">ID</label>
                <input type="text" id="div-id" placeholder="my-div">
              </div>
              
              <div class="form-group">
                <label for="div-class">Classes</label>
                <input type="text" id="div-class" placeholder="container highlight">
              </div>
            </div>
          </div>
          
          <div class="tab-content" data-tab-content="styling">
            <div class="field-row">
              <div class="form-group">
                <label for="div-width">Width</label>
                <input type="text" id="div-width" placeholder="300px or 100%">
              </div>
              
              <div class="form-group">
                <label for="div-height">Height</label>
                <input type="text" id="div-height" placeholder="200px or auto">
              </div>
            </div>
            
            <div class="field-row">
              <div class="form-group">
                <label for="div-bg-color">Background Color</label>
                <input type="text" id="div-bg-color" placeholder="#f8f9fa or transparent">
                <div class="color-picker" id="bg-color-picker">
                  <div class="color-option" style="background-color: #f8f9fa;" data-color="#f8f9fa"></div>
                  <div class="color-option" style="background-color: #e9ecef;" data-color="#e9ecef"></div>
                  <div class="color-option" style="background-color: #dee2e6;" data-color="#dee2e6"></div>
                  <div class="color-option" style="background-color: #4a6fa5;" data-color="#4a6fa5"></div>
                  <div class="color-option" style="background-color: #28a745;" data-color="#28a745"></div>
                  <div class="color-option" style="background-color: #dc3545;" data-color="#dc3545"></div>
                </div>
              </div>
              
              <div class="form-group">
                <label for="div-text-color">Text Color</label>
                <input type="text" id="div-text-color" placeholder="#212529 or inherit">
                <div class="color-picker" id="text-color-picker">
                  <div class="color-option" style="background-color: #212529;" data-color="#212529"></div>
                  <div class="color-option" style="background-color: #495057;" data-color="#495057"></div>
                  <div class="color-option" style="background-color: #f8f9fa;" data-color="#f8f9fa"></div>
                  <div class="color-option" style="background-color: #ffffff;" data-color="#ffffff"></div>
                </div>
              </div>
            </div>
            
            <div class="field-row">
              <div class="form-group">
                <label for="div-padding">Padding</label>
                <input type="text" id="div-padding" placeholder="10px or 10px 15px">
              </div>
              
              <div class="form-group">
                <label for="div-margin">Margin</label>
                <input type="text" id="div-margin" placeholder="10px or 10px 0">
              </div>
            </div>
            
            <div class="field-row">
              <div class="form-group">
                <label for="div-border">Border</label>
                <input type="text" id="div-border" placeholder="1px solid #dee2e6">
              </div>
              
              <div class="form-group">
                <label for="div-border-radius">Border Radius</label>
                <input type="text" id="div-border-radius" placeholder="4px or 50%">
              </div>
            </div>
          </div>
          
          <div class="tab-content" data-tab-content="advanced">
            <div class="form-group">
              <label for="div-display">Display</label>
              <select id="div-display">
                <option value="">Default</option>
                <option value="block">Block</option>
                <option value="flex">Flex</option>
                <option value="grid">Grid</option>
                <option value="inline-block">Inline Block</option>
                <option value="none">None</option>
              </select>
            </div>
            
            <div class="flex-options" style="display: none;">
              <div class="field-row">
                <div class="form-group">
                  <label for="div-flex-direction">Flex Direction</label>
                  <select id="div-flex-direction">
                    <option value="row">Row</option>
                    <option value="column">Column</option>
                    <option value="row-reverse">Row Reverse</option>
                    <option value="column-reverse">Column Reverse</option>
                  </select>
                </div>
                
                <div class="form-group">
                  <label for="div-justify-content">Justify Content</label>
                  <select id="div-justify-content">
                    <option value="flex-start">Flex Start</option>
                    <option value="flex-end">Flex End</option>
                    <option value="center">Center</option>
                    <option value="space-between">Space Between</option>
                    <option value="space-around">Space Around</option>
                    <option value="space-evenly">Space Evenly</option>
                  </select>
                </div>
              </div>
              
              <div class="field-row">
                <div class="form-group">
                  <label for="div-align-items">Align Items</label>
                  <select id="div-align-items">
                    <option value="stretch">Stretch</option>
                    <option value="flex-start">Flex Start</option>
                    <option value="flex-end">Flex End</option>
                    <option value="center">Center</option>
                    <option value="baseline">Baseline</option>
                  </select>
                </div>
                
                <div class="form-group">
                  <label for="div-gap">Gap</label>
                  <input type="text" id="div-gap" placeholder="10px or 10px 20px">
                </div>
              </div>
            </div>
            
            <div class="form-group">
              <label for="custom-css">Custom CSS</label>
              <textarea id="custom-css" placeholder="box-shadow: 0 2px 5px rgba(0,0,0,0.1);&#10;transition: all 0.3s ease;"></textarea>
            </div>
            
            <div class="form-group">
              <label for="data-attributes">Data Attributes (JSON)</label>
              <textarea id="data-attributes" placeholder='{ "data-id": "123", "data-type": "container" }'></textarea>
            </div>
          </div>
          
          <div class="tab-content" data-tab-content="presets">
            <h3>Available Presets</h3>
            <div class="presets-container">
              <button class="preset-btn" data-preset="card">Card</button>
              <button class="preset-btn" data-preset="alert">Alert</button>
              <button class="preset-btn" data-preset="hero">Hero Section</button>
              <button class="preset-btn" data-preset="sidebar">Sidebar</button>
              <button class="preset-btn" data-preset="modal">Modal</button>
              <button class="preset-btn" data-preset="grid-item">Grid Item</button>
            </div>
            <div class="form-group">
              <label for="preset-description">Preset Description</label>
              <div id="preset-description" style="padding: 10px; background-color: #f8f9fa; border-radius: 4px; min-height: 80px; margin-bottom: 15px;">
                Select a preset to see its description
              </div>
            </div>
          </div>
        </div>
        
        <div class="actions">
          <button id="reset-btn">Reset</button>
          <button id="generate-btn">Generate Div</button>
        </div>
      </div>
      
      <div class="preview-panel">
        <h3>Preview</h3>
        <div id="preview-container"></div>
        
        <button id="add-child-btn">Add Child Div</button>
      </div>
      
      <div class="code-panel">
        <button id="copy-code-btn" class="copy-btn btn-sm">Copy Code</button>
        <pre class="code-content" id="generated-code"></pre>
      </div>
    </div>
  </div>
  
  <script>
    // Presets configuration
    const presets = {
      card: {
        content: '<h3>Card Title</h3><p>This is a simple card component with some content.</p>',
        id: 'card-1',
        class: 'card',
        styling: {
          width: '100%',
          padding: '20px',
          backgroundColor: '#ffffff',
          border: '1px solid #dee2e6',
          borderRadius: '8px',
          boxShadow: '0 2px 5px rgba(0,0,0,0.1)'
        },
        description: 'A simple card component with a title and content. Cards are used to group related information in a flexible container.'
      },
      alert: {
        content: '<strong>Warning!</strong> This is an important alert message.',
        id: 'alert-1',
        class: 'alert alert-warning',
        styling: {
          width: '100%',
          padding: '15px',
          backgroundColor: '#fff3cd',
          color: '#856404',
          border: '1px solid #ffeeba',
          borderRadius: '4px'
        },
        description: 'An alert component to display important messages to the user. This example uses warning styling.'
      },
      hero: {
        content: '<h1>Welcome to our Website</h1><p>This is a hero section with a call to action.</p><button style="padding: 10px 20px; background-color: #4a6fa5; color: white; border: none; border-radius: 4px; cursor: pointer;">Learn More</button>',
        id: 'hero-section',
        class: 'hero',
        styling: {
          width: '100%',
          padding: '60px 20px',
          backgroundColor: '#e9ecef',
          textAlign: 'center',
          display: 'flex',
          flexDirection: 'column',
          alignItems: 'center',
          justifyContent: 'center',
          gap: '20px'
        },
        description: 'A hero section for the top of a webpage. Includes a headline, description text, and a call-to-action button.'
      },
      sidebar: {
        content: '<h3>Navigation</h3><ul style="list-style-type: none; padding: 0;"><li style="margin-bottom: 10px;"><a href="#" style="text-decoration: none; color: inherit;">Home</a></li><li style="margin-bottom: 10px;"><a href="#" style="text-decoration: none; color: inherit;">About</a></li><li style="margin-bottom: 10px;"><a href="#" style="text-decoration: none; color: inherit;">Services</a></li><li style="margin-bottom: 10px;"><a href="#" style="text-decoration: none; color: inherit;">Contact</a></li></ul>',
        id: 'sidebar',
        class: 'sidebar',
        styling: {
          width: '250px',
          height: '100%',
          padding: '20px',
          backgroundColor: '#f8f9fa',
          borderRight: '1px solid #dee2e6'
        },
        description: 'A sidebar navigation menu with links to different sections of a website. Typically placed on the left or right side of a page.'
      },
      modal: {
        content: '<div style="padding: 20px; border-bottom: 1px solid #dee2e6;"><h3>Modal Title</h3></div><div style="padding: 20px;">This is the modal body content.</div><div style="padding: 15px; border-top: 1px solid #dee2e6; text-align: right;"><button style="padding: 5px 10px; background-color: #6c757d; color: white; border: none; border-radius: 4px; margin-right: 10px; cursor: pointer;">Close</button><button style="padding: 5px 10px; background-color: #4a6fa5; color: white; border: none; border-radius: 4px; cursor: pointer;">Save changes</button></div>',
        id: 'modal',
        class: 'modal',
        styling: {
          width: '500px',
          backgroundColor: '#ffffff',
          borderRadius: '6px',
          boxShadow: '0 5px 15px rgba(0,0,0,0.1)',
          margin: '0 auto'
        },
        description: 'A modal dialog box with a title, content area, and footer with action buttons. Used for displaying content that requires user interaction.'
      },
      'grid-item': {
        content: '<img src="/api/placeholder/300/200" alt="Placeholder" style="width: 100%; height: auto;"><h4 style="margin: 10px 0;">Grid Item Title</h4><p style="margin: 0;">Short description for this grid item.</p>',
        id: 'grid-item-1',
        class: 'grid-item',
        styling: {
          backgroundColor: '#ffffff',
          border: '1px solid #dee2e6',
          borderRadius: '4px',
          overflow: 'hidden'
        },
        description: 'A grid item component typically used in a grid layout. Contains an image, title, and description - perfect for product listings or card galleries.'
      }
    };
    
    // DOM Elements
    const tabButtons = document.querySelectorAll('.tab');
    const tabContents = document.querySelectorAll('.tab-content');
    const presetButtons = document.querySelectorAll('.preset-btn');
    const generateBtn = document.getElementById('generate-btn');
    const resetBtn = document.getElementById('reset-btn');
    const copyCodeBtn = document.getElementById('copy-code-btn');
    const addChildBtn = document.getElementById('add-child-btn');
    const previewContainer = document.getElementById('preview-container');
    const generatedCodeEl = document.getElementById('generated-code');
    const presetDescription = document.getElementById('preset-description');
    
    // Form elements
    const divContent = document.getElementById('div-content');
    const divId = document.getElementById('div-id');
    const divClass = document.getElementById('div-class');
    const divWidth = document.getElementById('div-width');
    const divHeight = document.getElementById('div-height');
    const divBgColor = document.getElementById('div-bg-color');
    const divTextColor = document.getElementById('div-text-color');
    const divPadding = document.getElementById('div-padding');
    const divMargin = document.getElementById('div-margin');
    const divBorder = document.getElementById('div-border');
    const divBorderRadius = document.getElementById('div-border-radius');
    const divDisplay = document.getElementById('div-display');
    const divFlexDirection = document.getElementById('div-flex-direction');
    const divJustifyContent = document.getElementById('div-justify-content');
    const divAlignItems = document.getElementById('div-align-items');
    const divGap = document.getElementById('div-gap');
    const customCss = document.getElementById('custom-css');
    const dataAttributes = document.getElementById('data-attributes');
    
    // Flex options container
    const flexOptions = document.querySelector('.flex-options');
    
    // Color pickers
    const bgColorOptions = document.querySelectorAll('#bg-color-picker .color-option');
    const textColorOptions = document.querySelectorAll('#text-color-picker .color-option');
    
    // Tab functionality
    tabButtons.forEach(button => {
      button.addEventListener('click', () => {
        // Remove active class from all tabs
        tabButtons.forEach(btn => btn.classList.remove('active'));
        tabContents.forEach(content => content.classList.remove('active'));
        
        // Add active class to clicked tab
        button.classList.add('active');
        document.querySelector(`[data-tab-content="${button.dataset.tab}"]`).classList.add('active');
      });
    });
    
    // Show/hide flex options based on display selection
    divDisplay.addEventListener('change', () => {
      if (divDisplay.value === 'flex') {
        flexOptions.style.display = 'block';
      } else {
        flexOptions.style.display = 'none';
      }
    });
    
    // Color picker functionality
    bgColorOptions.forEach(option => {
      option.addEventListener('click', () => {
        bgColorOptions.forEach(opt => opt.classList.remove('active'));
        option.classList.add('active');
        divBgColor.value = option.dataset.color;
      });
    });
    
    textColorOptions.forEach(option => {
      option.addEventListener('click', () => {
        textColorOptions.forEach(opt => opt.classList.remove('active'));
        option.classList.add('active');
        divTextColor.value = option.dataset.color;
      });
    });
    
    // Show preset description on hover
    presetButtons.forEach(button => {
      button.addEventListener('mouseover', () => {
        const presetName = button.dataset.preset;
        const preset = presets[presetName];
        
        if (preset && preset.description) {
          presetDescription.textContent = preset.description;
        }
      });
      
      button.addEventListener('mouseout', () => {
        presetDescription.textContent = 'Select a preset to see its description';
      });
    });
    
    // Apply preset
    presetButtons.forEach(button => {
      button.addEventListener('click', () => {
        const presetName = button.dataset.preset;
        const preset = presets[presetName];
        
        if (preset) {
          divContent.value = preset.content;
          divId.value = preset.id;
          divClass.value = preset.class;
          
          const styling = preset.styling;
          divWidth.value = styling.width || '';
          divHeight.value = styling.height || '';
          divBgColor.value = styling.backgroundColor || '';
          divTextColor.value = styling.color || '';
          divPadding.value = styling.padding || '';
          divMargin.value = styling.margin || '';
          divBorder.value = styling.border || '';
          divBorderRadius.value = styling.borderRadius || '';
          
          if (styling.display) {
            divDisplay.value = styling.display;
            
            if (styling.display === 'flex') {
              flexOptions.style.display = 'block';
              divFlexDirection.value = styling.flexDirection || 'row';
              divJustifyContent.value = styling.justifyContent || 'flex-start';
              divAlignItems.value = styling.alignItems || 'stretch';
              divGap.value = styling.gap || '';
            } else {
              flexOptions.style.display = 'none';
            }
          } else {
            divDisplay.value = '';
            flexOptions.style.display = 'none';
          }
          
          // Extract other custom CSS properties
          let customCssText = '';
          for (const [key, value] of Object.entries(styling)) {
            if (!['width', 'height', 'backgroundColor', 'color', 'padding', 'margin', 'border', 'borderRadius', 
                 'display', 'flexDirection', 'justifyContent', 'alignItems', 'gap'].includes(key)) {
              customCssText += `${kebabCase(key)}: ${value};\n`;
            }
          }
          customCss.value = customCssText;
          
          // Reset data attributes
          dataAttributes.value = '';
          
          // Switch to the Basic tab to show the applied settings
          tabButtons.forEach(btn => btn.classList.remove('active'));
          tabContents.forEach(content => content.classList.remove('active'));
          document.querySelector('[data-tab="basic"]').classList.add('active');
          document.querySelector('[data-tab-content="basic"]').classList.add('active');
          
          // Generate div after setting values
          generateDiv();
        }
      });
    });
    
    // Helper function to convert camelCase to kebab-case
    function kebabCase(str) {
      return str.replace(/([a-z0-9])([A-Z])/g, '$1-$2').toLowerCase();
    }
    
    // Helper function to escape HTML
    function escapeHtml(unsafe) {
      return unsafe
        .replace(/&/g, "&amp;")
        .replace(/</g, "&lt;")
        .replace(/>/g, "&gt;")
        .replace(/"/g, "&quot;")
        .replace(/'/g, "&#039;");
    }

    // Generate div from form inputs
    function generateDiv(replacePreview = true) {
      // Create the div element
      const div = document.createElement('div');
      
      // Set content
      div.innerHTML = divContent.value;
      
      // Set ID if provided
      if (divId.value) {
        div.id = divId.value;
      }
      
      // Set classes if provided
      if (divClass.value) {
        divClass.value.split(' ').forEach(cls => {
          if (cls) div.classList.add(cls);
        });
      }
      
      // Apply styles
      const styles = {};
      
      if (divWidth.value) styles.width = divWidth.value;
      if (divHeight.value) styles.height = divHeight.value;
      if (divBgColor.value) styles.backgroundColor = divBgColor.value;
      if (divTextColor.value) styles.color = divTextColor.value;
      if (divPadding.value) styles.padding = divPadding.value;
      if (divMargin.value) styles.margin = divMargin.value;
      if (divBorder.value) styles.border = divBorder.value;
      if (divBorderRadius.value) styles.borderRadius = divBorderRadius.value;
      
      if (divDisplay.value) {
        styles.display = divDisplay.value;
        
        if (divDisplay.value === 'flex') {
          if (divFlexDirection.value) styles.flexDirection = divFlexDirection.value;
          if (divJustifyContent.value) styles.justifyContent = divJustifyContent.value;
          if (divAlignItems.value) styles.alignItems = divAlignItems.value;
          if (divGap.value) styles.gap = divGap.value;
        }
      }
      
      // Apply custom CSS
      if (customCss.value) {
        const customCssLines = customCss.value.split('\n').filter(line => line.trim());
        customCssLines.forEach(line => {
          const [property, value] = line.split(':').map(part => part.trim());
          if (property && value) {
            // Remove trailing semicolon if present
            const cleanValue = value.endsWith(';') ? value.slice(0, -1) : value;
            
            // Convert kebab-case to camelCase for JS style properties
            const camelProperty = property.replace(/-([a-z])/g, (match, letter) => letter.toUpperCase());
            
            styles[camelProperty] = cleanValue;
          }
        });
      }
      
      // Apply all styles
      Object.assign(div.style, styles);
      
      // Apply data attributes
      if (dataAttributes.value) {
        try {
          const dataAttrs = JSON.parse(dataAttributes.value);
          for (const [key, value] of Object.entries(dataAttrs)) {
            if (key.startsWith('data-')) {
              div.setAttribute(key, value);
            }
          }
        } catch (error) {
          console.error('Invalid data attributes JSON:', error);
        }
      }
      
      // Update preview
      if (replacePreview) {
        previewContainer.innerHTML = '';
        previewContainer.appendChild(div);
      }
      
      // Update code display
      updateCodeDisplay(div);
      
      return div;
    }
    
    // Update code display
    function updateCodeDisplay(div) {
      if (!div) {
        generatedCodeEl.textContent = '';
        return;
      }
      
      // Clone the div to avoid modifying the preview
      const tempDiv = div.cloneNode(true);
      
      // Format the HTML with indentation
      const codeString = formatHtml(tempDiv.outerHTML);
      
      // Display the code
      generatedCodeEl.textContent = codeString;
    }
    
// Generate button click handler
generateBtn.addEventListener('click', () => {
  generateDiv();
});

// Reset button click handler
resetBtn.addEventListener('click', () => {
  // Clear all form inputs
  divContent.value = '';
  divId.value = '';
  divClass.value = '';
  divWidth.value = '';
  divHeight.value = '';
  divBgColor.value = '';
  divTextColor.value = '';
  divPadding.value = '';
  divMargin.value = '';
  divBorder.value = '';
  divBorderRadius.value = '';
  divDisplay.value = '';
  flexOptions.style.display = 'none';
  divFlexDirection.value = 'row';
  divJustifyContent.value = 'flex-start';
  divAlignItems.value = 'stretch';
  divGap.value = '';
  customCss.value = '';
  dataAttributes.value = '';
  
  // Clear color picker selections
  bgColorOptions.forEach(opt => opt.classList.remove('active'));
  textColorOptions.forEach(opt => opt.classList.remove('active'));
  
  // Clear preview and code
  previewContainer.innerHTML = '';
  generatedCodeEl.textContent = '';
});

// Copy code button click handler
copyCodeBtn.addEventListener('click', () => {
  // Copy code to clipboard
  navigator.clipboard.writeText(generatedCodeEl.textContent)
    .then(() => {
      // Visual feedback
      copyCodeBtn.classList.add('copied');
      copyCodeBtn.textContent = 'Copied!';
      
      // Reset button after 2 seconds
      setTimeout(() => {
        copyCodeBtn.classList.remove('copied');
        copyCodeBtn.textContent = 'Copy Code';
      }, 2000);
    })
    .catch(err => {
      console.error('Failed to copy code:', err);
    });
});

// Add child div button click handler
addChildBtn.addEventListener('click', () => {
  // Check if there's a parent div in the preview
  if (previewContainer.firstChild) {
    // Create a child div with some default properties
    const childContent = document.createElement('div');
    childContent.innerHTML = 'Child Div';
    childContent.style.padding = '10px';
    childContent.style.margin = '10px';
    childContent.style.backgroundColor = '#e9ecef';
    childContent.style.border = '1px solid #dee2e6';
    childContent.style.borderRadius = '4px';
    
    // Append to the parent div
    previewContainer.firstChild.appendChild(childContent);
    
    // Update code display
    updateCodeDisplay(previewContainer.firstChild);
  } else {
    // If no parent div exists, create one first
    alert('Please generate a parent div first!');
  }
});

// Initialize with an empty preview
document.addEventListener('DOMContentLoaded', () => {
  // Clear any previous state
  previewContainer.innerHTML = '';
  generatedCodeEl.textContent = '';
});

// Format HTML with proper indentation
function formatHtml(html) {
  let formatted = '';
  let indent = 0;
  
  // Helper function to get indentation string
  const getIndent = (level) => '  '.repeat(level);
  
  // Split HTML into individual characters
  const chars = html.split('');
  
  let inTag = false;        // Whether we're inside a tag
  let inContent = false;    // Whether we're inside content between tags
  let inClosingTag = false; // Whether we're inside a closing tag
  let currentTag = '';      // Current tag name being processed
  let buffer = '';          // Buffer for collecting characters
  
  for (let i = 0; i < chars.length; i++) {
    const char = chars[i];
    const nextChar = chars[i + 1] || '';
    
    buffer += char;
    
    // Start of a tag
    if (char === '<' && nextChar !== '/') {
      inTag = true;
      inContent = false;
      currentTag = '';
      
      // If we had content, add it
      if (buffer.length > 1) {
        formatted += getIndent(indent) + buffer.slice(0, -1).trim() + '\n';
        buffer = char;
      }
    }
    // Start of a closing tag
    else if (char === '<' && nextChar === '/') {
      inTag = true;
      inClosingTag = true;
      inContent = false;
      
      // If we had content, add it
      if (buffer.length > 1) {
        formatted += getIndent(indent) + buffer.slice(0, -1).trim() + '\n';
        buffer = char;
      }
      
      // Decrease indent for the closing tag
      indent = Math.max(0, indent - 1);
    }
    // End of a tag
    else if (char === '>') {
      inTag = false;
      
      // Self-closing tag
      if (buffer.includes('/>')) {
        formatted += getIndent(indent) + buffer + '\n';
        buffer = '';
      }
      // Closing tag
      else if (inClosingTag) {
        formatted += getIndent(indent) + buffer + '\n';
        buffer = '';
        inClosingTag = false;
      }
      // Opening tag
      else {
        formatted += getIndent(indent) + buffer + '\n';
        buffer = '';
        indent++;
        inContent = true;
      }
    }
    // Collecting tag name
    else if (inTag && /[a-zA-Z0-9]/.test(char) && currentTag === '' && !/\s/.test(char)) {
      currentTag += char;
    }
  }
  
  // Add any remaining buffer
  if (buffer) {
    formatted += getIndent(indent) + buffer;
  }
  
  return formatted;
}
</script>
</body>
</html>